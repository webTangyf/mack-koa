(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{49:function(t,r,e){"use strict";e.r(r);var s=e(0),a=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"mock-koa使用说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mock-koa使用说明","aria-hidden":"true"}},[t._v("#")]),t._v(" mock-koa使用说明")]),e("h2",{attrs:{id:"基本介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本介绍","aria-hidden":"true"}},[t._v("#")]),t._v(" 基本介绍")]),e("p",[t._v("本项目集合了mockjs 以及 koa 完成了一个方便工程师快速进行mock数据的小工具, mockjs提供了假数据的基本"),e("a",{attrs:{href:"http://mockjs.com/examples.html"}},[t._v("api")]),t._v(", 而koa实现了服务器的一个快速搭建。为了保证项目的轻便快捷。不希望用户安装除node依赖意外的东西，比如说数据库等。使用静态文件来进行接口的配置化工作，对于开发工作者而言api也是相对简单易懂的。")]),e("h2",{attrs:{id:"目录结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目录结构","aria-hidden":"true"}},[t._v("#")]),t._v(" 目录结构")]),e("pre",[e("code",[t._v("  '|-- mock-koa',                          总文件夹\n  '    |-- .gitignore', \n  '    |-- README.md',\n  '    |-- config.js',                     mock-koa总配置项\n  '    |-- error.js',                      mock-koa统一错误配置项\n  '    |-- mock.js',                       mock-koa源码\n  '    |-- package.json',\n  '    |-- tool.js',                       js 工具库\n  '    |-- yarn.lock',\n  '    |-- .vuepress',                     文档配置\n  '    |   |-- config.js',\n  '    |-- router',                        接口静态文件\n  '    |   |-- api',\n  '    |       |-- doc',\n  '    |           |-- list',\n  '    |               |-- error.js',      接口: /api/doc/list 配置错误时的统一返回\n  '    |               |-- request.js',\t   接口: /api/doc/list 请求配置\n  '    |               |-- response.js',   接口: /api/doc/list 响应配置\n  '    |-- template',\n  '        |-- error.js',                  error.js 生成模版\n  '        |-- request.js',                request.js 生成模版\n  '        |-- response.js',               response.js 生成模版\n  '\n")])]),e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("接口路径")]),e("p",[t._v("接口路径统一由/router底下文件夹路径构成，如上则生成接口 /api/doc/list")])]),e("h2",{attrs:{id:"开发文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开发文档","aria-hidden":"true"}},[t._v("#")]),t._v(" 开发文档")]),e("h3",{attrs:{id:"命令行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令行","aria-hidden":"true"}},[t._v("#")]),t._v(" 命令行")]),e("p",[t._v("快速生成接口文件的命令")]),e("pre",[e("code",[t._v("node mock add api/xxx/xxx //您想要接口地址\n")])]),e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("警告")]),e("p",[t._v("这里请不要写成绝对路径")])]),e("p",[t._v("启动服务")]),e("pre",[e("code",[t._v("node mock serve\n")])]),e("h3",{attrs:{id:"总配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 总配置")]),e("h4",{attrs:{id:"config-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#config-js","aria-hidden":"true"}},[t._v("#")]),t._v(" config.js")]),e("ul",[e("li",[t._v("port 端口号\n"),e("ul",[e("li",[t._v("默认： 4100")])])])]),e("h4",{attrs:{id:"error-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#error-js","aria-hidden":"true"}},[t._v("#")]),t._v(" error.js")]),e("ul",[e("li",[t._v("paramsError 参数错误的返回对象"),e("br"),t._v("\n默认值：")])]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("{\n    retcode: '1111',\n    retmsg: '参数不完整'\n}\n")])]),e("ul",[e("li",[t._v("commonError 全局报错的返回对象"),e("br"),t._v("\n默认值：")])]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("{\n\tretcode: '1111',\n\tretmsg: '系统出错'\n}\n")])]),e("ul",[e("li",[t._v("responseError 解析错误的返回对象"),e("br"),t._v("\n默认值：")])]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("{\n\tretcode: '1111',\n\tretmsg: 'mock数据格式解析错误'\n}\n")])]),e("h3",{attrs:{id:"接口配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#接口配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 接口配置")]),e("h4",{attrs:{id:"request-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request-js","aria-hidden":"true"}},[t._v("#")]),t._v(" request.js")]),e("ul",[e("li",[e("p",[t._v("type 请求类型"),e("br"),t._v("默认值：get"),e("br"),t._v(" 参数类型: 字符串")])]),e("li",[e("p",[t._v("params 请求参数列表 "),e("br"),t._v(" 默认值：[] "),e("br"),t._v(" 参数类型: 数组"),e("br"),t._v(" 样例：")])])]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('\tparams: [\n\t\t"@type",\n\t\tversion\n\t]\n')])]),e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("小提示")]),e("p",[t._v("当参数名称前加入@ 代表必传参数")])]),e("ul",[e("li",[t._v("if 特殊请求判断列表 "),e("br"),t._v(" 默认值：[] "),e("br"),t._v(" 参数类型: 数组\n"),e("ul",[e("li",[t._v("mockIf 用于判断参数统一性 目前只支持 字符型")]),e("li",[t._v("mockType 数据合并类型 支持merge，cover两种 "),e("br"),t._v(" 默认值：\n"),e("ul",[e("li",[t._v("merge 合并响应")]),e("li",[t._v("cover 覆盖响应")])])]),e("li",[t._v("mockReturn 响应内容 支持"),e("a",{attrs:{href:"http://mockjs.com/examples.html"}},[t._v("mockapi")])])])])]),e("p",[t._v("完成if案例：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("if: [\n\t{\n\t\tmockIf: {\n\t\t\ttype: '1',\n\t\t},\n\t\tmockType: 'merge',\n\t\tmockReturn : {\n\t\t\ttype: '1',\n\t\t}\n\t},\n\t{\n\t\tmockIf: {\n\t\t\ttype: '1',\n\t\t\tversion: '2'\n\t\t},\n\t\tmockType: 'cover',\n\t\tmockReturn : {\n\t\t\ttype: '2',\n\t\t}\n\t},\n]\n\n")])]),e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("解释")]),e("p",[t._v("看到以上案例， 首先当入参type为1时进行匹配，你会看到两个都是符合条件的，那么我们会完全符合mockIf条件并且条件数（注：指参数数量）更多的进行匹配")])]),e("h4",{attrs:{id:"response-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response-js","aria-hidden":"true"}},[t._v("#")]),t._v(" response.js")]),e("p",[t._v("引入了mock.Random\n增强了可操作性，以及自由度\n只需要修改 return 下的JSON 就可以获得对应的参数")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("var Random = require('mockjs').Random;\n\nvar response = function () {\n  return {\n    returnCode: \"0000\",\n    returnMsg: \"成功\",\n    email: '@date()'\n  };\n}\n\n")])]),e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("小贴士")]),e("p",[e("a",{attrs:{href:"http://mockjs.com/examples.html"}},[t._v("点击这里可以查看更多MockApi")])])]),e("h4",{attrs:{id:"error-js-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#error-js-2","aria-hidden":"true"}},[t._v("#")]),t._v(" error.js")]),e("ul",[e("li",[t._v("该接口报错时的返回，针对response文件配置出错")])]),e("p",[t._v("默认值：")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n  returnCode: "1111",\n  returnMsg: "报错了"\n}\n')])])])}],!1,null,null,null);r.default=a.exports}}]);